<div class="container">

  @if (loading) {
    <p class="loading">Loading movie details...</p>
  }
  
  @else if (error) {
    <p class="error">{{ error }}</p>
    <button class="back-btn" (click)="goBack()">← Back to Movies</button>
  }
  
  @else if (movie) {
    <div class="movie-details">
      <button class="back-btn" (click)="goBack()">← Back to Movies</button>
      
      <div class="hero" [style.background-image]="'url(' + getBackdropUrl(movie.backdrop_path) + ')'">
        <div class="hero-content">
          <img [src]="getImageUrl(movie.poster_path)" [alt]="movie.title" class="poster">
          <div class="info">
            <h1>{{ movie.title }}</h1>
            <p class="tagline">{{ movie.tagline }}</p>
            <div class="meta">
              <span class="rating"> {{ movie.vote_average }}/10</span>
              <span class="runtime"> {{ movie.runtime }} min</span>
              <span class="release"> {{ movie.release_date | date }}</span>
            </div>
            <div class="genres">
              @for (genre of movie.genres; track genre.id) {
                <span class="genre">{{ genre.name }}</span>
              }
            </div>
          </div>
        </div>
      </div>
      
      <div class="overview">
        <h2>Overview</h2>
        <p>{{ movie.overview }}</p>
      </div>
      @if (recommendations && recommendations.length > 0) {
        <div class="recommendations">
          <h2>Recommendations</h2>
          <div class="recommendation-grid">
            @for (rec of recommendations; track rec.id) {
              <div class="recommendation-item" (click)="goToMovieDetails(rec.id)">
                <img [src]="getImageUrl(rec.poster_path)" [alt]="rec.title" class="rec-poster">
                <div class="rec-info">
                  <h3>{{ rec.title }}</h3>
                  <p class="rec-rating"> {{ rec.vote_average }}/10</p>
                </div>
              </div>
            }
          </div>
        </div>
      }
    </div>
  }
</div>