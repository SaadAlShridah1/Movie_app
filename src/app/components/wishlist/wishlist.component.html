<div class="container">
  <div class="wishlist-header">
    <h1>Watch list</h1>
    
    @if (wishlistCount() > 0) {
      <div class="wishlist-tabs">
        <button 
          class="tab-btn"
          [class.active]="activeTab() === 'all'"
          (click)="setActiveTab('all')">
          All ({{ wishlistCount() }})
        </button>
        <button 
          class="tab-btn"
          [class.active]="activeTab() === 'movies'"
          (click)="setActiveTab('movies')">
          Movies ({{ movieCount() }})
        </button>
        <button 
          class="tab-btn"
          [class.active]="activeTab() === 'tv'"
          (click)="setActiveTab('tv')">
          TV Shows ({{ tvCount() }})
        </button>
      </div>
    }
  </div>

  @if (wishlistCount() > 0) {
    <div class="wishlist-content">
      @if (itemsWithRating().length === 0) {
        <div class="empty-state">
          <div class="empty-icon">
            <img src="assets/heart_slash.png" alt="Empty wishlist">
          </div>
          <p>{{ emptyStateText() }}</p>
          <button class="back-to-home-btn" (click)="goBack()">Back to home</button>
        </div>
      }
      @else {
        <div class="wishlist-grid">
          @for (item of itemsWithRating(); track item.id + '-' + item.type) {
            <div class="wishlist-card" (click)="goToDetails(item)">
              <img 
                [src]="item.imageUrl"
                [alt]="item.title"
                class="wishlist-poster">
              
              <div class="wishlist-info">
                <h3>{{ item.title }}</h3>
                
                <p class="release-date">
                  {{ item.release_date | date:'MMM dd, yyyy' }}
                </p>
                
                <div class="rating-stars">
                  @for (star of item.starsArray; track $index) {
                    <img 
                      [class]="star.cssClass" 
                      [src]="star.imageSrc"
                      [alt]="star.altText"
                    >
                  }
                  <span class="rating-number">{{ item.formattedRating }}</span>
                </div>
                
                <p class="movie-description">
                  {{ item.description }}
                </p>
                
                <img 
                  class="bookmark-icon"
                  src="/assets/heart3.png"
                  alt="Remove from wishlist"
                  (click)="removeFromWishlist(item.id, item.type!); $event.stopPropagation()"
                >
              </div>
            </div>
          }
        </div>
      }
    </div>
  }

  @else {
    <div class="empty-wishlist">
      <div class="empty-icon">
        <img src="assets/heart_slash.png" alt="Empty wishlist">
      </div>
      <h2>No Movies in watch list</h2>
      <button class="back-to-home-btn" (click)="goBack()">Back to home</button>
    </div>
  }
</div>